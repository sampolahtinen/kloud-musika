# Migration `20200403130105-update-type`

This migration has been generated by Sampo Lahtinen at 4/3/2020, 1:01:05 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE UNIQUE INDEX "Artist.name" ON "public"."Artist"("name")

CREATE UNIQUE INDEX "Track.fileId" ON "public"."Track"("fileId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200324141825-cdfddd..20200403130105-update-type
--- datamodel.dml
+++ datamodel.dml
@@ -1,52 +1,51 @@
-
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgresql://sampo@localhost:5432/kloud_muzika"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model Post {
-  id        Int     @id @default(autoincrement())
+  id        Int     @default(autoincrement()) @id
   title     String
   content   String?
   published Boolean @default(false)
-  author    User?
+  author    User?   @relation(references: [id])
 }
 model User {
-  id    Int     @id @default(autoincrement())
+  id    Int     @default(autoincrement()) @id
   email String  @unique
   name  String?
   posts Post[]
 }
-
 model TrackMetadata {
-  id                 Int    @id @default(autoincrement())
+  id                 Int    @default(autoincrement()) @id
   track              Track
   original_file_path String
   direct_link        String
 }
 model Track {
-  id       Int            @id @default(autoincrement())
+  id       Int            @default(autoincrement()) @id
   title    String
-  fileId   String?
-  artist   Artist
-  metadata TrackMetadata?
+  fileId   String?        @unique
+  artist   Artist         @relation(references: [id])
+  metadata TrackMetadata? @relation(references: [id])
 }
 model Artist {
-  id      Int     @id @default(autoincrement())
-  name    String
+  id      Int     @default(autoincrement()) @id
+  name    String  @unique
   country String?
+  tracks  Track[]
 }
 model Album {
-  id           Int     @id @default(autoincrement())
+  id           Int     @default(autoincrement()) @id
   name         String
   release_date String?
 }
```


